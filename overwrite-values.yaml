global:
  registry: 
    name: "008971668139.dkr.ecr.us-east-1.amazonaws.com"
  imagePullSecrets:
    - name: ecr-secret
externalSecrets:
  ecr:
    token: ""
    server: "008971668139.dkr.ecr.us-east-1.amazonaws.com"
    username: "AWS" 
externalRedis:
  enabled: true
  secretRef: "redis-cred"
  key: "url"
    
redis:
  enabled: false

  # OpenAI API configuration (required for Frontend, Mercury and Apollo)
openAI:
  # -- Enable OpenAI integration
  enabled: true
  # -- Secret name containing OpenAI API key
  secretRef: "composio-composio-secrets" 
  # -- Key name in the secret
  key: "API_KEY"

# Apollo service configuration (main API service)
apollo:
  image:
    repository: composio-self-host/apollo
    tag: "release-20251209_00"
    pullPolicy: Always
  ingress:
    enabled: false
  # Apollo database initialization container
  dbInit:
    enabled: true
    image:
      repository: composio-self-host/apollo-db-init
      tag: "release-20251209_00"
      pullPolicy: Always
  # Apollo database configuration
  database:
    urlSecret:
      name: "composio-composio-secrets"
      key: "url"
  # SMTP configuration for email notifications
  smtp:
    enabled: false
  objectStorage:
    backend: "s3"
    accessKey: 
      secretName: "s3-cred"
      key: "S3_ACCESS_KEY_ID"
    secretKey: 
      secretName: "s3-cred"
      key: "S3_SECRET_ACCESS_KEY"

# Thermos service configuration (workflow execution service)
thermos:
  database: 
    secretRef: "thermosdb"
    key: "uri"
  image:
    repository: composio-self-host/thermos
    tag: "release-20251209_00"
    pullPolicy: Always
  # Thermos database initialization container
  dbInit:
    enabled: true
    image:
      repository: composio-self-host/thermos-db-init
      tag: "release-20251209_00"
      pullPolicy: Always
 
otel:
  enabled: false

temporal:
  # -- Override the full name of Temporal resources
  fullnameOverride: "replicated-test"
  
  # Temporal server configuration
  server:
    # -- Enable Temporal server
    enabled: true
    # Liveness probe configuration
    livenessProbe:
      # -- Enable liveness probe
      enabled: false

    # Readiness probe configuration
    readinessProbe:
      # -- Enable readiness probe
      enabled: false

    # -- Number of Temporal server replicas
    replicaCount: 2
    # Temporal server image configuration
    image:
      # -- Temporal server image repository
      repository: temporalio/server
      # -- Temporal server image tag
      tag: 1.28.0
      # -- Image pull policy
      pullPolicy: IfNotPresent
    
    # Temporal server configuration
    config:
      # -- Log level (debug, info, warn, error)
      logLevel: "info"
      # -- Number of history shards (affects scalability)
      numHistoryShards: 512
      
      # Persistence configuration for Temporal data
      persistence:
        # -- Default persistence store
        defaultStore: default
        
        # Main Temporal database configuration
        default:
          # -- Database driver
          driver: "sql"
          # SQL database configuration
          sql:
            # -- SQL driver name
            driver: "postgres12"
            # -- Database host
            host: "postgres-new.db"
            # -- Database port
            port: 5432
            # -- Database name
            database: "temporal"
            # -- Database user
            user: "composio"
            # -- Secret name containing database password
            existingSecret: "rrs-test-postgres"
            # -- Maximum number of database connections
            maxConns: 20
            # -- Maximum number of idle connections
            maxIdleConns: 20
            # -- Maximum connection lifetime
            maxConnLifetime: "1h"
        
        # Visibility database configuration (for advanced queries)
        visibility:
          # -- Database driver
          driver: "sql" 
          # SQL database configuration
          sql:
            # -- SQL driver name
            driver: "postgres12"
            # -- Database host
            host: "postgres-new.db"
            # -- Database port
            port: 5432
            # -- Database name
            database: "temporal_visibility"
            # -- Database user
            user: "composio"
            # -- Secret name containing database password
            existingSecret: "rrs-test-postgres"
            # -- Maximum number of database connections
            maxConns: 20
            # -- Maximum number of idle connections
            maxIdleConns: 20
            # -- Maximum connection lifetime
            maxConnLifetime: "1h"

# Mercury service configuration (OpenAPI tool execution service)
mercury:
  enabled: true
  useKnative: true
  replicaCount: 1
  image:
    repository: composio-self-host/mercury
    tag: "release-20251209_00"
    pullPolicy: Always

# Frontend service configuration (web UI)
frontend:
  enabled: false
  replicaCount: 1
  image:
    repository: composio-self-host/frontend
    tag: "release-20251209_00"
    pullPolicy: Always
